{% extends '::base.html.twig' %}

{% set wrapperId = 'krg_cms_page_wrapper' %}

{% block container %}
    <div id="{{ wrapperId }}" class="cms-content-live-edit">
        {% include block %}
    </div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/krgcms/cbuilder/cbuilder.css') }}">
    <link rel="stylesheet" href="{{ asset('bundles/krgcms/easyadmin/style.css') }}">

    <style>
        a, button[type=submit], input[type=submit] {
            pointer-events: none;
        }

        #divCb a, #divCb button[type=submit], #divCb input[type=submit] {
            pointer-events: initial;
        }
    </style>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/krgcms/cbuilder/jquery.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/krgcms/cbuilder/jquery-ui.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/krgcms/cbuilder/contentbuilder.js') }}" type="text/javascript"></script>
    <iframe src="{{ asset('bundles/krgcms/cbuilder/headings.html') }}" style="width:0;height:0;border:0;border:none;"></iframe>
    <iframe src="{{ asset('bundles/krgcms/cbuilder/fonts.html') }}" style="width:0;height:0;border:0;border:none;"></iframe>

    <script type="text/javascript">
        var element = document.getElementById('{{ wrapperId }}');
        var $element = null;

        $(document).ready(function ($) {
            $element = $(element);
        });

        function start() {
            if ($element) {
                $element.contentbuilder({
                    snippetFile: "{{ path('krg_page_snippets', {'useThumbnail': false}) }}",
                    toolbar: 'left',
                    buttons: ["bold", "italic", "formatting", "textsettings", "color", "font", "formatPara", "align", "list", "table", "image", "createLink", "unlink", "icon", "tags", "removeFormat", "html"],
                });
            }
        }

        function stop() {
            if ($element.data('contentbuilder')) {
                $element.data('contentbuilder').destroy();
            }
        }

        function toggleHeaderFooter(extraHideArray) {
            var header = $('header').first();
            var footer = $('footer').first();

            if (header) { header.toggleClass('hidden-f'); }
            if (footer) { footer.toggleClass('hidden-f'); }

            if (extraHideArray != undefined) {
                $.each(extraHideArray, function (index, value) {
                    $(value).toggleClass('hidden-f');
                });
            }
        }
    </script>
{% endblock %}

